"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = extractStyles;

var _react = _interopRequireDefault(require("react"));

var _server = require("glamor/server");

var _uiBox = require("ui-box");

function extractStyles() {
  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  var _boxExtractStyles = (0, _uiBox.extractStyles)(),
      cache = _boxExtractStyles.cache,
      styles = _boxExtractStyles.styles;

  var _renderStatic = (0, _server.renderStatic)(function () {
    return 'let glamor believe there is some html here';
  }),
      css = _renderStatic.css,
      ids = _renderStatic.ids;

  var evergreenCache = {
    uiBoxCache: cache,
    glamorIds: ids
  };
  var scriptProps = {
    type: 'application/json',
    id: 'evergreen-hydrate',
    dangerouslySetInnerHTML: {
      __html: JSON.stringify(evergreenCache)
    }
  };

  if (options.nonce) {
    scriptProps.nonce = options.nonce;
  }

  return {
    css: styles + '\n' + css,
    cache: evergreenCache,
    hydrationScript: /*#__PURE__*/_react["default"].createElement("script", scriptProps)
  };
}